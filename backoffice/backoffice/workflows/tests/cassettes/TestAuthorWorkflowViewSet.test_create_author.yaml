interactions:
- request:
    body: '{"index":{"_id":"00000000-0000-0000-0000-000000000000","_index":"backoffice-backend-test-workflows"}}

      {"id":"00000000-0000-0000-0000-000000000000","workflow_type":"AUTHOR_CREATE","data":{"test":"test"},"decisions":[],"status":"running","is_update":false,"_created_at":"2024-10-16T16:02:40.988835+00:00","_updated_at":"2024-10-16T16:02:40.988841+00:00"}

      '
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json
    method: POST
    uri: http://es:9200/_bulk?refresh=true
  response:
    body:
      string: '{"took":51,"errors":false,"items":[{"index":{"_index":"backoffice-backend-test-workflows","_id":"00000000-0000-0000-0000-000000000000","_version":2,"result":"updated","forced_refresh":true,"_shards":{"total":2,"successful":1,"failed":0},"_seq_no":13,"_primary_term":1,"status":200}}]}'
    headers:
      content-length:
      - '284'
      content-type:
      - application/json; charset=UTF-8
    status:
      code: 200
      message: OK
- request:
    body: '{"dag_run_id": "00000000-0000-0000-0000-000000000000", "conf": {"workflow_id":
      "00000000-0000-0000-0000-000000000000", "data": {"test": "test"}}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '145'
      Content-Type:
      - application/json
    method: POST
    uri: http://airflow-webserver:8080/api/v1/dags/author_create_initialization_dag/dagRuns
  response:
    body:
      string: "{\n  \"detail\": \"DAGRun with DAG ID: 'author_create_initialization_dag'
        and DAGRun ID: '00000000-0000-0000-0000-000000000000' already exists\",\n
        \ \"status\": 409,\n  \"title\": \"Conflict\",\n  \"type\": \"https://airflow.apache.org/docs/apache-airflow/2.9.3/stable-rest-api-ref.html#section/Errors/AlreadyExists\"\n}\n"
    headers:
      Cache-Control:
      - no-store
      Connection:
      - close
      Content-Length:
      - '302'
      Content-Type:
      - application/problem+json
      Date:
      - Wed, 16 Oct 2024 16:02:41 GMT
      Server:
      - gunicorn
      X-Robots-Tag:
      - noindex, nofollow
    status:
      code: 409
      message: CONFLICT
- request:
    body: '{"index":{"_id":"709dfad4-a41c-4211-a848-35bf4dc9af80","_index":"backoffice-backend-test-workflows"}}

      {"id":"709dfad4-a41c-4211-a848-35bf4dc9af80","workflow_type":"AUTHOR_CREATE","data":{"name":{"value":"John,
      Snow"},"_collections":["Authors"],"$schema":"https://inspirehep.net/schemas/records/authors.json"},"decisions":[],"status":"running","is_update":false,"_created_at":"2024-10-16T16:02:41.204753+00:00","_updated_at":"2024-10-16T16:02:41.204768+00:00"}

      '
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json
    method: POST
    uri: http://es:9200/_bulk?refresh=true
  response:
    body:
      string: '{"took":54,"errors":false,"items":[{"index":{"_index":"backoffice-backend-test-workflows","_id":"709dfad4-a41c-4211-a848-35bf4dc9af80","_version":1,"result":"created","forced_refresh":true,"_shards":{"total":2,"successful":1,"failed":0},"_seq_no":14,"_primary_term":1,"status":201}}]}'
    headers:
      content-length:
      - '284'
      content-type:
      - application/json; charset=UTF-8
    status:
      code: 200
      message: OK
- request:
    body: '{"dag_run_id": "709dfad4-a41c-4211-a848-35bf4dc9af80", "conf": {"workflow_id":
      "709dfad4-a41c-4211-a848-35bf4dc9af80", "data": {"name": {"value": "John, Snow"},
      "_collections": ["Authors"], "$schema": "https://inspirehep.net/schemas/records/authors.json"}}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '257'
      Content-Type:
      - application/json
    method: POST
    uri: http://airflow-webserver:8080/api/v1/dags/author_create_initialization_dag/dagRuns
  response:
    body:
      string: "{\n  \"conf\": {\n    \"data\": {\n      \"$schema\": \"https://inspirehep.net/schemas/records/authors.json\",\n
        \     \"_collections\": [\n        \"Authors\"\n      ],\n      \"name\":
        {\n        \"value\": \"John, Snow\"\n      }\n    },\n    \"workflow_id\":
        \"709dfad4-a41c-4211-a848-35bf4dc9af80\"\n  },\n  \"dag_id\": \"author_create_initialization_dag\",\n
        \ \"dag_run_id\": \"709dfad4-a41c-4211-a848-35bf4dc9af80\",\n  \"data_interval_end\":
        \"2024-10-16T16:02:41.373180+00:00\",\n  \"data_interval_start\": \"2024-10-16T16:02:41.373180+00:00\",\n
        \ \"end_date\": null,\n  \"execution_date\": \"2024-10-16T16:02:41.373180+00:00\",\n
        \ \"external_trigger\": true,\n  \"last_scheduling_decision\": null,\n  \"logical_date\":
        \"2024-10-16T16:02:41.373180+00:00\",\n  \"note\": null,\n  \"run_type\":
        \"manual\",\n  \"start_date\": null,\n  \"state\": \"queued\"\n}\n"
    headers:
      Cache-Control:
      - no-store
      Connection:
      - close
      Content-Length:
      - '777'
      Content-Type:
      - application/json
      Date:
      - Wed, 16 Oct 2024 16:02:41 GMT
      Server:
      - gunicorn
      X-Robots-Tag:
      - noindex, nofollow
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
    method: DELETE
    uri: http://airflow-webserver:8080/api/v1/dags/author_create_initialization_dag/dagRuns/00000000-0000-0000-0000-000000000000
  response:
    body:
      string: ''
    headers:
      Cache-Control:
      - no-store
      Connection:
      - close
      Content-Type:
      - application/json
      Date:
      - Wed, 16 Oct 2024 16:02:41 GMT
      Server:
      - gunicorn
      X-Robots-Tag:
      - noindex, nofollow
    status:
      code: 204
      message: NO CONTENT
version: 1
